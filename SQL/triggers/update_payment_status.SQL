CREATE OR REPLACE TRIGGER update_payment_status
BEFORE UPDATE OF ORDER_STATE
ON ORDERLIST
FOR EACH ROW
DECLARE 
BEGIN 
    IF( :NEW.ORDER_STATE = 'DELIVERED' AND :OLD.PAYMENT_METHOD = 'COD' ) THEN
        :NEW.PAYMENT_STATUS := 'PAID';
        :NEW.DUE := 0;
    END IF;
END;

UPDATE ORDERLIST
SET ORDER_STATE = 'DELIVERED';